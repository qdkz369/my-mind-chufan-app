# 环境变量配置说明

## 问题诊断

如果创建供应商时提示 `SUPABASE_SERVICE_ROLE_KEY 未配置`，请按以下步骤检查：

## 步骤 1：确认 .env.local 文件存在

在项目根目录（与 `package.json` 同级）创建或检查 `.env.local` 文件。

## 步骤 2：确认文件内容

`.env.local` 文件内容应该是：

```
SUPABASE_SERVICE_ROLE_KEY=sb_secret_Nf3MT3QFxzXzr60Myh6VwA_K3-II_Nd
```

**重要提示：**
- 不要有多余的空格
- 不要有引号（除非值本身包含特殊字符）
- 每行一个环境变量

## 步骤 3：重启开发服务器

**必须重启！** Next.js 只在启动时读取环境变量。

1. 停止当前服务器（按 `Ctrl + C`）
2. 重新启动：`npm run dev`

## 步骤 4：验证配置

重启后，查看服务器终端输出，应该能看到：
- `[创建公司API] 环境变量检查:` 日志
- `SUPABASE_SERVICE_ROLE_KEY 存在: true`

## 常见问题

### Q: 文件已创建但还是不工作？
A: 确保：
1. 文件在项目根目录（不是子目录）
2. 文件名是 `.env.local`（注意前面的点）
3. 已重启开发服务器

### Q: 如何确认环境变量被读取？
A: 查看服务器终端日志，API 会输出环境变量检查信息。

### Q: 生产环境如何配置？
A: 在部署平台（如 Vercel）的环境变量设置中添加 `SUPABASE_SERVICE_ROLE_KEY`。


